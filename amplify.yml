version: 1
applications:
    - frontend:
          buildPath: '/' # run install and build from monorepo project root
          phases:
              preBuild:
                  commands:
                      - npm ci
                      - npx prisma generate
              build:
                  commands:
                      - npm run build --workspace=nextjs-app
          artifacts:
              baseDirectory: packages/nextjs-app/.next
              files:
                  - '**/*'
          cache:
              paths:
                  - node_modules/**/*
      appRoot: packages/nextjs-app
